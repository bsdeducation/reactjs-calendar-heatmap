{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 624aa0745173dbfcb999","webpack:///./src/index.js","webpack:///./src/calendar-heatmap.component.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\",\"umd\":\"react\"}","webpack:///external \"moment\"","webpack:///external \"d3\"","webpack:///./src/calendar-heatmap.css?3f75","webpack:///./src/calendar-heatmap.css","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js"],"names":["React","d3","CalendarHeatmap","props","settings","gutter","item_gutter","width","height","item_size","label_padding","max_block_height","transition_duration","tooltip_width","tooltip_padding","legend_padding","in_transition","overview","history","selected","calcDimensions","bind","createElements","parseData","drawChart","window","addEventListener","removeEventListener","svg","select","append","attr","items","labels","buttons","legends","tooltip","heatmapTooltip","style","dayIndex","Math","round","subtract","startOf","colIndex","trunc","numWeeks","container","offsetWidth","data","summary","map","d","details","reduce","uniques","project","name","value","unsorted_summary","Object","keys","key","sort","a","b","onlyYearOverview","drawYearOverview","drawGlobalOverview","drawMonthOverview","drawWeekOverview","drawDayOverview","length","push","start","date","end","endOf","year_data","timeYears","getSummary","year","item","prev","current","total","max_value","max","year_labels","yearScale","scaleBand","rangeRound","padding","domain","selectAll","remove","item_block","enter","color","scaleLinear","range","on","hideTooltip","removeGlobalOverview","tooltip_html","sec","parseInt","days","floor","hours","minutes","convFunction","counter","other_projects_sum","x","y","html","transition","duration","ease","easeLinear","delay","i","call","callback","empty","n","each","apply","arguments","text","year_label","startOfYearOverview","start_of_year","end_of_year","add","filter","cursorStyle","min_value","min","max_value_color","min_value_color","calcItemX","calcItemY","weekday","calcItemSize","gradient","offset","widthLegend","heightLegend","xPositionLegend","yPositionLegend","removeYearOverview","circle","event","currentTarget","repeat","header","format","cos","PI","random","month_labels","timeMonths","monthScale","toLocaleDateString","month","selected_month","isSame","month_data","e","day_labels","timeDays","dayScale","bandwidth","selected_day","day","drawButton","start_of_month","end_of_month","week_labels","clone","week","weekScale","removeMonthOverview","item_width","itemScale","parentNode","Date","week_data","start_of_week","end_of_week","removeWeekOverview","project_labels","projectScale","scaleTime","timeSecond","handler","timeLabels","timeHours","timeScale","obj","text_length","node","getComputedTextLength","slice","button","removeDayOverview","pop","hideBackButton","calendarHeatmap","elem","Component","formatTime","seconds","time","defaultProps","undefined"],"mappings":"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AAwB,2BAA2B,GAAG,6NAA6N,wBAAwB,qBAAqB,4BAA4B,GAAG;;AAE/yC;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA","file":"calendar-heatmap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"moment\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"moment\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CalendarHeatmap\"] = factory(require(\"react\"), require(\"moment\"), require(\"d3\"));\n\telse\n\t\troot[\"CalendarHeatmap\"] = factory(root[\"React\"], root[\"moment\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 624aa0745173dbfcb999","import CalendarHeatmap from './calendar-heatmap.component.js'\n\nexport default CalendarHeatmap\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import * as React from 'react'\n\nimport moment from 'moment'\nimport * as d3 from 'd3'\n\nimport styles from './calendar-heatmap.css'\n\nclass CalendarHeatmap extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.settings = {\n      gutter: 1,\n      item_gutter: 0,\n      width: 750,\n      height: 200,\n      item_size: 8,\n      label_padding: 30,\n      max_block_height: 20,\n      transition_duration: 500,\n      tooltip_width: 250,\n      tooltip_padding: 15,\n      legend_padding: 40,\n    }\n\n    this.in_transition = false\n    this.overview = this.props.overview\n    this.history = ['global']\n    this.selected = {}\n\n    this.calcDimensions = this.calcDimensions.bind(this)\n  }\n\n  componentDidMount() {\n    this.createElements()\n    this.parseData()\n    this.drawChart()\n\n    window.addEventListener('resize', this.calcDimensions)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.calcDimensions)\n  }\n\n  createElements() {\n    // Create svg element\n    this.svg = d3.select('#calendar-heatmap')\n      .append('svg')\n      .attr('class', 'svg')\n\n    // Create other svg elements\n    this.items = this.svg.append('g')\n    this.labels = this.svg.append('g')\n    this.buttons = this.svg.append('g')\n    this.legends = this.svg.append('g')\n\n    // Add tooltip to the same element as main svg\n    this.tooltip = d3.select('#calendar-heatmap')\n      .append('div')\n      .attr('class', styles.heatmapTooltip)\n      .style('opacity', 0)\n      .style('pointer-events', 'none')\n      .style('position', 'absolute')\n      .style('z-index', 9999)\n      .style('width', '250px')\n      .style('max-width', '250px')\n      .style('overflow', 'hidden')\n      .style('padding', '15px')\n      .style('font-size', '12px')\n      .style('line-height', '14px')\n      .style('color', 'rgb(51, 51, 51)')\n      .style('background', 'rgba(255, 255, 255, 0.75)')\n\n    this.calcDimensions()\n  }\n\n  // Calculate dimensions based on available width\n  calcDimensions() {\n    let dayIndex = Math.round((moment() - moment().subtract(1, 'year').startOf('week')) / 86400000)\n    let colIndex = Math.trunc(dayIndex / 7)\n    let numWeeks = colIndex + 1\n\n    this.settings.width = this.container.offsetWidth < 750 ? 750 : this.container.offsetWidth\n    this.settings.item_size = ((this.settings.width - this.settings.label_padding) / numWeeks - this.settings.gutter)\n    this.settings.height = this.settings.label_padding + 7 * (this.settings.item_size + this.settings.gutter) + this.settings.legend_padding\n    this.svg.attr('width', this.settings.width)\n      .attr('height', this.settings.height)\n\n    if ( !!this.props.data && !!this.props.data[0].summary ) {\n      this.drawChart()\n    }\n  }\n\n  parseData() {\n    if ( !this.props.data ) { return }\n\n    // Get daily summary if that was not provided\n    if ( !this.props.data[0].summary ) {\n      this.props.data.map(d => {\n        let summary = d.details.reduce((uniques, project) => {\n          if (!uniques[project.name]) {\n            uniques[project.name] = {\n              'value': project.value\n            }\n          } else {\n            uniques[project.name].value += project.value\n          }\n          return uniques\n        }, {})\n        let unsorted_summary = Object.keys(summary).map(key => {\n          return {\n            'name': key,\n            'value': summary[key].value\n          }\n        })\n        d.summary = unsorted_summary.sort((a, b) => {\n          return b.value - a.value\n        })\n        return d\n      })\n    }\n  }\n\n  drawChart() {\n    if ( this.overview === 'year' || this.props.onlyYearOverview) {\n      this.drawYearOverview()\n    } else if ( this.overview === 'global' ) {\n      this.drawGlobalOverview()\n    } else if ( this.overview === 'month' ) {\n      this.drawMonthOverview()\n    } else if ( this.overview === 'week' ) {\n      this.drawWeekOverview()\n    } else if ( this.overview === 'day' ) {\n      this.drawDayOverview()\n    }\n  }\n\n\n  /**\n   * Draw global overview (multiple years)\n   */\n  drawGlobalOverview() {\n    \n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Define start and end of the dataset\n    let start = moment(this.props.data[0].date).startOf('year')\n    let end = moment(this.props.data[this.props.data.length - 1].date).endOf('year')\n\n    // Define array of years and total values\n    let year_data = d3.timeYears(start, end).map(d => {\n      let date = moment(d)\n      let getSummary = () => {\n        let summary = this.props.data.reduce((summary, d) => {\n          if (moment(d.date).year() === date.year()) {\n            d.summary.map(item => {\n              if (!summary[item.name]) {\n                summary[item.name] = {\n                  'value': item.value,\n                }\n              } else {\n                summary[item.name].value += item.value\n              }\n            })\n          }\n          return summary\n        }, {})\n        let unsorted_summary = Object.keys(summary).map(key => {\n          return {\n            'name': key,\n            'value': summary[key].value\n          }\n        })\n        return unsorted_summary.sort((a, b) => {\n          return b.value - a.value\n        })\n      }\n      return {\n        'date': date,\n        'total': this.props.data.reduce((prev, current) => {\n          if (moment(current.date).year() === date.year()) {\n            prev += current.total\n          }\n          return prev\n        }, 0),\n        'summary': getSummary(),\n      }\n    })\n\n    // Calculate max value of all the years in the dataset\n    let max_value = d3.max(year_data, d => {\n      return d.total\n    })\n\n    // Define year labels and axis\n    let year_labels = d3.timeYears(start, end).map(d => {\n      return moment(d)\n    })\n    let yearScale = d3.scaleBand()\n      .rangeRound([0, this.settings.width])\n      .padding([0.05])\n      .domain(year_labels.map(d => {\n        return d.year()\n      }))\n\n    // Add global data items to the overview\n    this.items.selectAll('.item-block-year').remove()\n    let item_block = this.items.selectAll('.item-block-year')\n      .data(year_data)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-year')\n      .style('cursor', 'pointer')\n      .attr('width', () => {\n        return (this.settings.width - this.settings.label_padding) / year_labels.length - this.settings.gutter * 5\n      })\n      .attr('height', () => {\n        return this.settings.height - this.settings.label_padding\n      })\n      .attr('transform', d => {\n        return 'translate(' + yearScale(d.date.year()) + ',' + this.settings.tooltip_padding * 2 + ')'\n      })\n      .attr('fill', d => {\n        let color = d3.scaleLinear()\n          .range(['#ffffff', this.props.color])\n          .domain([-0.15 * max_value, max_value])\n        return color(d.total) || '#ff4500'\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Set in_transition flag\n        this.in_transition = true\n\n        // Set selected date to the one clicked on\n        this.selected = d\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview()\n\n        // Redraw the chart\n        this.overview = 'year'\n        this.drawChart()\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Construct tooltip\n        let tooltip_html = ''\n        tooltip_html += '<div><span><strong>Total time tracked:</strong></span>'\n\n        let sec = parseInt(d.total, 10)\n        let days = Math.floor(sec / 86400)\n        if (days > 0) {\n          tooltip_html += '<span>' + (days === 1 ? '1 day' : days + ' days') + '</span></div>'\n        }\n        let hours = Math.floor((sec - (days * 86400)) / 3600)\n        if (hours > 0) {\n          if (days > 0) {\n            tooltip_html += '<div><span></span><span>' + (hours === 1 ? '1 hour' : hours + ' hours') + '</span></div>'\n          } else {\n            tooltip_html += '<span>' + (hours === 1 ? '1 hour' : hours + ' hours') + '</span></div>'\n          }\n        }\n        let minutes = Math.floor((sec - (days * 86400) - (hours * 3600)) / 60)\n        if (minutes > 0) {\n          if (days > 0 || hours > 0) {\n            tooltip_html += '<div><span></span><span>' + (minutes === 1 ? '1 minute' : minutes + ' minutes') + '</span></div>'\n          } else {\n            tooltip_html += '<span>' + (minutes === 1 ? '1 minute' : minutes + ' minutes') + '</span></div>'\n          }\n        }\n        tooltip_html += '<br />'\n        const {convFunction} = this.props;\n        // Add summary to the tooltip\n        if (d.summary.length <= 5) {\n          let counter = 0\n          while ( counter < d.summary.length ) {\n            tooltip_html += '<div><span><strong>' + d.summary[counter].name + '</strong></span>'\n            tooltip_html += '<span>' + convFunction(d.summary[counter].value) + '</span></div>'\n            counter++\n          }\n        } else {\n          let counter = 0\n          while ( counter < 5 ) {\n            tooltip_html += '<div><span><strong>' + d.summary[counter].name + '</strong></span>'\n            tooltip_html += '<span>' + convFunction(d.summary[counter].value) + '</span></div>'\n            counter++\n          }\n\n          tooltip_html += '<br />'\n\n          counter = 5\n          let other_projects_sum = 0\n          while ( counter < d.summary.length ) {\n            other_projects_sum = +d.summary[counter].value\n            counter++\n          }\n          tooltip_html += '<div><span><strong>Other:</strong></span>'\n          tooltip_html += '<span>' + this.convFunction(other_projects_sum) + '</span></div>'\n        }\n\n        // Calculate tooltip position\n        let x = yearScale(d.date.year()) + this.settings.tooltip_padding * 2\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 5)) {\n          x -= 10\n        }\n        let y = this.settings.tooltip_padding * 3\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .transition()\n      .delay((d, i) => {\n        return this.settings.transition_duration * (i + 1) / 10\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => {++n })\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add year labels\n    this.labels.selectAll('.label-year').remove()\n    this.labels.selectAll('.label-year')\n      .data(year_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-year')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return d.year()\n      })\n      .attr('x', d => {\n        return yearScale(d.year())\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', year_label => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).year() === year_label.year()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Set in_transition flag\n        this.in_transition = true\n\n        // Set selected year to the one clicked on\n        this.selected = { date: d }\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview()\n\n        // Redraw the chart\n        this.overview = 'year'\n        this.drawChart()\n      })\n  }\n\n\n  /**\n   * Draw year overview\n   */\n  drawYearOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n    const {startOfYearOverview} = this.props;\n    // Define start and end date of the selected year\n    let start_of_year = !startOfYearOverview\n      ? moment(this.selected.date).startOf('year')\n      : moment(startOfYearOverview)\n    let end_of_year = !startOfYearOverview\n      ? moment(this.selected.date).endOf('year')\n      : moment(startOfYearOverview).add(12, 'months')\n\n    // Filter data down to the selected year\n    let year_data = this.props.data.filter(d => {\n      return start_of_year <= moment(d.date) && moment(d.date) < end_of_year\n    })\n    const cursorStyle = this.props.onlyYearOverview ? 'default' : 'pointer';\n    // Calculate max value of the year data\n    let max_value = d3.max(year_data, d => d.total)\n    let min_value = d3.min(year_data, d => d.total)\n    let color = d3.scaleLinear()\n    .range(['#ffffff', this.props.color])\n    .domain([-0.15 * max_value, max_value])\n\n    const max_value_color = color(max_value);\n    const min_value_color = color(min_value);\n  \n    let calcItemX = (d) => {\n      let date = moment(d.date)\n      let dayIndex = Math.round((date - moment(start_of_year).startOf('week')) / 86400000)\n      let colIndex = Math.trunc(dayIndex / 7)\n      return colIndex * (this.settings.item_size + this.settings.gutter) + this.settings.label_padding\n    }\n\n    let calcItemY = d => {\n      return this.settings.label_padding + moment(d.date).weekday() * (this.settings.item_size + this.settings.gutter)\n    }\n\n    let calcItemSize = d => {\n      if ( max_value <= 0 ) {\n        return this.settings.item_size\n      }\n      return this.settings.item_size * 0.75 + (this.settings.item_size * d.total / max_value) * 0.25\n    }\n\n    this.legends.selectAll('.legend').remove();\n    this.legends.selectAll('.min-max').remove();\n\n    const gradient = this.legends\n      .append('linearGradient')\n      .attr('id', 'linear-gradient')\n\n    gradient\n      .attr('x1', '100%')\n      .attr('y1', '0%')\n      .attr('x2', '0%')\n      .attr('y2', '0%')\n\n    gradient.selectAll('stop')\n      .data([\n        {offset: '0%', color: max_value_color},\n        {offset: '100%', color: min_value_color}\n      ])\n      .enter().append('stop')\n      .attr('offset', function(d) { \n        return d.offset; \n      })\n      .attr('stop-color', function(d) { \n        return d.color; \n      });\n\n      let widthLegend = 200;\n      let heightLegend = 20;\n      let xPositionLegend = this.settings.width/2 - widthLegend/2;\n      let yPositionLegend = this.settings.height + 5;\n\n      this.legends\n      .append('rect')\n      .attr('class', 'legend')\n      .attr('width', widthLegend)\n      .attr('height', heightLegend)\n\n      .attr('x', d => {\n        return xPositionLegend;\n      })\n      .attr('y', d => {\n        return yPositionLegend -20 ;\n      })\n      .style('fill', 'url(#linear-gradient)');\n\n      this.legends.append('text')\n      .attr('class', 'min-max')\n      .attr('x', xPositionLegend - 15 )\n      .attr('y', yPositionLegend - 10 )\n      .text(min_value)\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      ;\n\n      this.legends.append('text')\n      .attr('class', 'min-max')\n      .attr('x',xPositionLegend  + 205)\n      .attr('y',yPositionLegend  - 10)\n      .text(max_value)\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      });\n\n    this.items.selectAll('.item-circle').remove()\n    this.items.selectAll('.item-circle')\n      .data(year_data)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-circle')\n      .style('cursor', cursorStyle)\n      .style('opacity', 0)\n      .attr('x', d => {\n        return calcItemX(d) + (this.settings.item_size - calcItemSize(d)) / 2\n      })\n      .attr('y', d => {\n        return calcItemY(d) + (this.settings.item_size - calcItemSize(d)) / 2\n      })\n      // .attr('rx', d => {\n      //   return calcItemSize(d)\n      // })\n      // .attr('ry', d => {\n      //   return calcItemSize(d)\n      // })\n      .attr('width', d => {\n        return calcItemSize(d)\n      })\n      .attr('height', d => {\n        return calcItemSize(d)\n      })\n      .attr('fill', d => {\n        return (d.total > 0) ? color(d.total) : 'transparent'\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Don't transition if there is no data to show\n        if (d.total === 0) { return }\n\n        if(this.props.onlyYearOverview) { return }\n\n        this.in_transition = true\n\n        // Set selected date to the one clicked on\n        this.selected = d\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all year overview related items and labels\n        this.removeYearOverview()\n\n        // Redraw the chart\n        this.overview = 'day'\n        this.drawChart()\n      })\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n        // Pulsating animation\n        let circle = d3.select(d3.event.currentTarget)\n        let repeat = () => {\n          circle = circle.transition()\n            .duration(this.settings.transition_duration)\n            .ease(d3.easeLinear)\n            .attr('x', d => {\n              return calcItemX(d) - (this.settings.item_size * 1.1 - this.settings.item_size) / 2\n            })\n            .attr('y', d => {\n              return calcItemY(d) - (this.settings.item_size * 1.1 - this.settings.item_size) / 2\n            })\n            .attr('width', this.settings.item_size * 1.1)\n            .attr('height', this.settings.item_size * 1.1)\n            .transition()\n            .duration(this.settings.transition_duration)\n            .ease(d3.easeLinear)\n            .attr('x', d => {\n              return calcItemX(d) + (this.settings.item_size - calcItemSize(d)) / 2\n            })\n            .attr('y', d => {\n              return calcItemY(d) + (this.settings.item_size - calcItemSize(d)) / 2\n            })\n            .attr('width', d => {\n              return calcItemSize(d)\n            })\n            .attr('height', d => {\n              return calcItemSize(d)\n            })\n            .on('end', repeat)\n        }\n        repeat()\n\n        // Construct tooltip\n        const {convFunction} = this.props;\n        let tooltip_html = ''\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.total ? convFunction(d.total) : 'No time'}</strong></div>`\n        tooltip_html += '<div>on ' + moment(d.date).format('dddd, MMM Do YYYY') + '</div><br>'\n\n        // Add summary to the tooltip\n        let counter = 0\n        while ( counter < d.summary.length ) {\n          tooltip_html += '<div><span><strong>' + d.summary[counter].name + '</strong></span>'\n          tooltip_html += '<span>' + convFunction(d.summary[counter].value) + '</span></div>'\n          counter++\n        }\n\n        // Calculate tooltip position\n        let x = calcItemX(d) + this.settings.item_size\n        if (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= this.settings.tooltip_width + this.settings.tooltip_padding * 2\n        }\n        let y = calcItemY(d) + this.settings.item_size\n        // Show tooltip\n        // const {left: containerX, top: containerY} = this.container.getBoundingClientRect();\n        // x += containerX;\n        // y += containerY;\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        // Set circle radius back to what its supposed to be\n        d3.select(d3.event.currentTarget).transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .attr('x', d => {\n            return calcItemX(d) + (this.settings.item_size - calcItemSize(d)) / 2\n          })\n          .attr('y', d => {\n            return calcItemY(d) + (this.settings.item_size - calcItemSize(d)) / 2\n          })\n          .attr('width', d => {\n            return calcItemSize(d)\n          })\n          .attr('height', d => {\n            return calcItemSize(d)\n          })\n\n        // Hide tooltip\n        this.hideTooltip()\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add month labels\n    let month_labels = d3.timeMonths(start_of_year, end_of_year)\n    let monthScale = d3.scaleLinear()\n      .range([this.settings.label_padding, this.settings.width])\n      .domain([0, month_labels.length])\n    this.labels.selectAll('.label-month').remove()\n    this.labels.selectAll('.label-month')\n      .data(month_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-month')\n      .style('cursor', cursorStyle)\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return d.toLocaleDateString('en-us', { month: 'short' })\n      })\n      .attr('x', (d, i) => {\n        return monthScale(i)\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_month = moment(d)\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return moment(d.date).isSame(selected_month, 'month') ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n        if(this.props.onlyYearOverview) { return }\n\n        // Check month data\n        let month_data = this.props.data.filter(e => {\n          return moment(d).startOf('month') <= moment(e.date) && moment(e.date) < moment(d).endOf('month')\n        })\n\n        // Don't transition if there is no data to show\n        if (!month_data.length) { return }\n\n        // Set selected month to the one clicked on\n        this.selected = { date: d }\n\n        this.in_transition = true\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all year overview related items and labels\n        this.removeYearOverview()\n\n        // Redraw the chart\n        this.overview = 'month'\n        this.drawChart()\n      })\n\n    // Add day labels\n    let day_labels = d3.timeDays(moment().startOf('week'), moment().endOf('week'))\n    let dayScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height - this.settings.legend_padding])\n      .domain(day_labels.map(d => {\n        return moment(d).weekday()\n      }))\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-day')\n      .data(day_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-day')\n      .style('cursor', cursorStyle)\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 3)\n      .attr('y', (d, i) => {\n        return dayScale(i) + dayScale.bandwidth() / 1.75\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('dddd')[0]\n      })\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_day = moment(d)\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).day() === selected_day.day()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add button to switch back to previous overview\n    if (!this.props.onlyYearOverview) {\n      this.drawButton()\n    }\n  }\n\n\n  /**\n   * Draw month overview\n   */\n  drawMonthOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Define beginning and end of the month\n    let start_of_month = moment(this.selected.date).startOf('month')\n    let end_of_month = moment(this.selected.date).endOf('month')\n\n    // Filter data down to the selected month\n    let month_data = this.props.data.filter(d => {\n      return start_of_month <= moment(d.date) && moment(d.date) < end_of_month\n    })\n    let max_value = d3.max(month_data, d => {\n      return d3.max(d.summary, d => {\n        return d.value\n      })\n    })\n\n    // Define day labels and axis\n    let day_labels = d3.timeDays(moment().startOf('week'), moment().endOf('week'))\n    let dayScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height])\n      .domain(day_labels.map(d => {\n        return moment(d).weekday()\n      }))\n\n    // Define week labels and axis\n    let week_labels = [start_of_month.clone()]\n    while (start_of_month.week() !== end_of_month.week()) {\n      week_labels.push(start_of_month.add(1, 'week').clone())\n    }\n    let weekScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.width])\n      .padding([0.05])\n      .domain(week_labels.map(weekday => {\n        return weekday.week()\n      }))\n\n    // Add month data items to the overview\n    this.items.selectAll('.item-block-month').remove()\n    let item_block = this.items.selectAll('.item-block-month')\n      .data(month_data)\n      .enter()\n      .append('g')\n      .attr('class', 'item item-block-month')\n      .style('cursor', 'pointer')\n      .attr('width', () => {\n        return (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('transform', d => {\n        return 'translate(' + weekScale(moment(d.date).week()) + ',' + ((dayScale(moment(d.date).weekday()) + dayScale.bandwidth() / 1.75) - 15) + ')'\n      })\n      .attr('total', d => {\n        return d.total\n      })\n      .attr('date', d => {\n        return d.date\n      })\n      .attr('offset', 0)\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Don't transition if there is no data to show\n        if (d.total === 0) { return }\n\n        this.in_transition = true\n\n        // Set selected date to the one clicked on\n        this.selected = d\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all month overview related items and labels\n        this.removeMonthOverview()\n\n        // Redraw the chart\n        this.overview = 'day'\n        this.drawChart()\n      })\n\n    let item_width = (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n    let itemScale = d3.scaleLinear()\n      .rangeRound([0, item_width])\n\n    let item_gutter = this.settings.item_gutter\n    item_block.selectAll('.item-block-rect')\n      .data(d => d.summary)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-rect')\n      .style('cursor', 'pointer')\n      .attr('x', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        let offset = parseInt(d3.select(this.parentNode).attr('offset'))\n        itemScale.domain([0, total])\n        d3.select(this.parentNode).attr('offset', offset + itemScale(d.value))\n        return offset\n      })\n      .attr('width', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        itemScale.domain([0, total])\n        return Math.max((itemScale(d.value) - item_gutter), 1)\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('fill', d => {\n        let color = d3.scaleLinear()\n          .range(['#ffffff', this.props.color])\n          .domain([-0.15 * max_value, max_value])\n        return color(d.value) || '#ff4500'\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Get date from the parent node\n        let parentNode = d3.select(d3.event.currentTarget.parentNode)\n        let date = new Date(parentNode.attr('date'))\n\n        // Construct tooltip\n        const {convFunction} = this.props;\n        let tooltip_html = ''\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.name}</strong></div><br>`\n        tooltip_html += '<div><strong>' + (d.value ? convFunction(d.value) : 'No time') + ' tracked</strong></div>'\n        tooltip_html += '<div>on ' + moment(date).format('dddd, MMM Do YYYY') + '</div>'\n\n        // Calculate tooltip position\n        let x = weekScale(moment(date).week()) + this.settings.tooltip_padding\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= 10\n        }\n        let y = dayScale(moment(date).weekday()) + this.settings.tooltip_padding * 2\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add week labels\n    this.labels.selectAll('.label-week').remove()\n    this.labels.selectAll('.label-week')\n      .data(week_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-week')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return 'Week ' + d.week()\n      })\n      .attr('x', d => {\n        return weekScale(d.week())\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', weekday => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).week() === weekday.week()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Check week data\n        let week_data = this.props.data.filter(e => {\n          return d.startOf('week') <= moment(e.date) && moment(e.date) < d.endOf('week')\n        })\n\n        // Don't transition if there is no data to show\n        if (!week_data.length) { return }\n\n        this.in_transition = true\n\n        // Set selected month to the one clicked on\n        this.selected = { date: d }\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all year overview related items and labels\n        this.removeMonthOverview()\n\n        // Redraw the chart\n        this.overview = 'week'\n        this.drawChart()\n      })\n\n    // Add day labels\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-day')\n      .data(day_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-day')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 3)\n      .attr('y', (d, i) => {\n        return dayScale(i) + dayScale.bandwidth() / 1.75\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('dddd')[0]\n      })\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_day = moment(d)\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).day() === selected_day.day()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add button to switch back to previous overview\n    this.drawButton()\n  }\n\n\n  /**\n   * Draw week overview\n   */\n  drawWeekOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Define beginning and end of the week\n    let start_of_week = moment(this.selected.date).startOf('week')\n    let end_of_week = moment(this.selected.date).endOf('week')\n\n    // Filter data down to the selected week\n    let week_data = this.props.data.filter(d => {\n      return start_of_week <= moment(d.date) && moment(d.date) < end_of_week\n    })\n    let max_value = d3.max(week_data, d => {\n      return d3.max(d.summary, d => {\n        return d.value\n      })\n    })\n\n    // Define day labels and axis\n    let day_labels = d3.timeDays(moment().startOf('week'), moment().endOf('week'))\n    let dayScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height])\n      .domain(day_labels.map(d => {\n        return moment(d).weekday()\n      }))\n\n    // Define week labels and axis\n    let week_labels = [start_of_week]\n    let weekScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.width])\n      .padding([0.01])\n      .domain(week_labels.map(weekday => {\n        return weekday.week()\n      }))\n\n    // Add week data items to the overview\n    this.items.selectAll('.item-block-week').remove()\n    let item_block = this.items.selectAll('.item-block-week')\n      .data(week_data)\n      .enter()\n      .append('g')\n      .attr('class', 'item item-block-week')\n      .style('cursor', 'pointer')\n      .attr('width', () => {\n        return (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('transform', d => {\n        return 'translate(' + weekScale(moment(d.date).week()) + ',' + ((dayScale(moment(d.date).weekday()) + dayScale.bandwidth() / 1.75) - 15) + ')'\n      })\n      .attr('total', d =>{\n        return d.total\n      })\n      .attr('date', d => {\n        return d.date\n      })\n      .attr('offset', 0)\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Don't transition if there is no data to show\n        if (d.total === 0) { return }\n\n        this.in_transition = true\n\n        // Set selected date to the one clicked on\n        this.selected = d\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all week overview related items and labels\n        this.removeWeekOverview()\n\n        // Redraw the chart\n        this.overview = 'day'\n        this.drawChart()\n      })\n\n    let item_width = (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n    let itemScale = d3.scaleLinear()\n      .rangeRound([0, item_width])\n\n    let item_gutter = this.settings.item_gutter\n    item_block.selectAll('.item-block-rect')\n      .data(d => d.summary)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-rect')\n      .style('cursor', 'pointer')\n      .attr('x', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        let offset = parseInt(d3.select(this.parentNode).attr('offset'))\n        itemScale.domain([0, total])\n        d3.select(this.parentNode).attr('offset', offset + itemScale(d.value))\n        return offset\n      })\n      .attr('width', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        itemScale.domain([0, total])\n        return Math.max((itemScale(d.value) - item_gutter), 1)\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('fill', d => {\n        let color = d3.scaleLinear()\n          .range(['#ffffff', this.props.color])\n          .domain([-0.15 * max_value, max_value])\n        return color(d.value) || '#ff4500'\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Get date from the parent node\n        let parentNode = d3.select(d3.event.currentTarget.parentNode)\n        let date = new Date(parentNode.attr('date'))\n\n        // Construct tooltip\n        let tooltip_html = ''\n        const {convFunction} = this.props;\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.name}</strong></div><br>`\n        tooltip_html += '<div><strong>' + (d.value ? convFunction(d.value) : 'No time') + ' tracked</strong></div>'\n        tooltip_html += '<div>on ' + moment(date).format('dddd, MMM Do YYYY') + '</div>'\n\n        // Calculate tooltip position\n        let total = parseInt(parentNode.attr('total'))\n        itemScale.domain([0, total])\n        let x = parseInt(d3.select(d3.event.currentTarget).attr('x')) + itemScale(d.value) / 4 + this.settings.tooltip_width / 4\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= 10\n        }\n        let y = dayScale(moment(date).weekday()) + this.settings.tooltip_padding * 1.5\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add week labels\n    this.labels.selectAll('.label-week').remove()\n    this.labels.selectAll('.label-week')\n      .data(week_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-week')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return 'Week ' + d.week()\n      })\n      .attr('x', d => {\n        return weekScale(d.week())\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', weekday => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).week() === weekday.week()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add day labels\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-day')\n      .data(day_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-day')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 3)\n      .attr('y', (d, i) => {\n        return dayScale(i) + dayScale.bandwidth() / 1.75\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('dddd')[0]\n      })\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_day = moment(d)\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).day() === selected_day.day()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add button to switch back to previous overview\n    this.drawButton()\n  }\n\n\n  /**\n   * Draw day overview\n   */\n  drawDayOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Initialize selected date to today if it was not set\n    if (!Object.keys(this.selected).length) {\n      this.selected = this.props.data[this.props.data.length - 1]\n    }\n\n    let project_labels = this.selected.summary.map(project => {\n      return project.name\n    })\n    let projectScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height])\n      .domain(project_labels)\n\n    let itemScale = d3.scaleTime()\n      .range([this.settings.label_padding * 2, this.settings.width])\n      .domain([moment(this.selected.date).startOf('day'), moment(this.selected.date).endOf('day')])\n    this.items.selectAll('.item-block').remove()\n    this.items.selectAll('.item-block')\n      .data(this.selected.details)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block')\n      .style('cursor', 'pointer')\n      .attr('x', d => {\n        return itemScale(moment(d.date))\n      })\n      .attr('y', d => {\n        return (projectScale(d.name) + projectScale.bandwidth() / 2) - 15\n      })\n      .attr('width', d => {\n        let end = itemScale(d3.timeSecond.offset(moment(d.date), d.value))\n        return Math.max((end - itemScale(moment(d.date))), 1)\n      })\n      .attr('height', () => {\n        return Math.min(projectScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('fill', () => {\n        return this.props.color\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n        const {convFunction} = this.props;\n        // Construct tooltip\n        let tooltip_html = ''\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.name}</strong><div><br>`\n        tooltip_html += '<div><strong>' + (d.value ? convFunction(d.value) : 'No time') + ' tracked</strong></div>'\n        tooltip_html += '<div>on ' + moment(d.date).format('dddd, MMM Do YYYY HH:mm') + '</div>'\n\n        // Calculate tooltip position\n        let x = d.value * 100 / (60 * 60 * 24) + itemScale(moment(d.date))\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= 10\n        }\n        let y = projectScale(d.name) + projectScale.bandwidth() / 2 + this.settings.tooltip_padding / 2\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .on('click', d => {\n        if (!!this.props.handler && typeof this.props.handler == 'function') {\n          this.props.handler(d)\n        }\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 0.5)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add time labels\n    let timeLabels = d3.timeHours(\n      moment(this.selected.date).startOf('day'),\n      moment(this.selected.date).endOf('day')\n    )\n    let timeScale = d3.scaleTime()\n      .range([this.settings.label_padding * 2, this.settings.width])\n      .domain([0, timeLabels.length])\n    this.labels.selectAll('.label-time').remove()\n    this.labels.selectAll('.label-time')\n      .data(timeLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-time')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('HH:mm')\n      })\n      .attr('x', (d, i) => {\n        return timeScale(i)\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected = itemScale(moment(d))\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            let start = itemScale(moment(d.date))\n            let end = itemScale(moment(d.date).add(d.value, 'seconds'))\n            return (selected >= start && selected <= end) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 0.5)\n      })\n\n    // Add project labels\n    let label_padding = this.settings.label_padding\n    this.labels.selectAll('.label-project').remove()\n    this.labels.selectAll('.label-project')\n      .data(project_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label-heatmap label-project')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.gutter)\n      .attr('y', d => {\n        return projectScale(d) + projectScale.bandwidth() / 2\n      })\n      .attr('min-height', () => {\n        return projectScale.bandwidth()\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => d)\n      .each(function() {\n        let obj = d3.select(this),\n          text_length = obj.node().getComputedTextLength(),\n          text = obj.text()\n        while (text_length > (label_padding * 1.5) && text.length > 0) {\n          text = text.slice(0, -1)\n          obj.text(text + '...')\n          text_length = obj.node().getComputedTextLength()\n        }\n      })\n      .on('mouseenter', project => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (d.name === project) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 0.5)\n      })\n\n    // Add button to switch back to previous overview\n    this.drawButton()\n  }\n\n\n  /**\n   * Draw the button for navigation purposes\n   */\n  drawButton() {\n    this.buttons.selectAll('.button').remove()\n    let button = this.buttons.append('g')\n      .attr('class', 'button button-back')\n      .style('cursor', 'pointer')\n      .attr('fill', 'transparent')\n      .style('opacity', 0)\n      .style('stroke-width', 2)\n      .style('stroke', 'rgb(170, 170, 170)')\n      .on('click', () => {\n        if (this.in_transition) { return }\n\n        // Set transition boolean\n        this.in_transition = true\n\n        // Clean the canvas from whichever overview type was on\n        if (this.overview === 'year') {\n          this.removeYearOverview()\n        } else if (this.overview === 'month') {\n          this.removeMonthOverview()\n        } else if (this.overview === 'week') {\n          this.removeWeekOverview()\n        } else if (this.overview === 'day') {\n          this.removeDayOverview()\n        }\n\n        // Redraw the chart\n        this.history.pop()\n        this.overview = this.history.pop()\n        this.drawChart()\n      })\n    button.append('circle')\n      .attr('cx', this.settings.label_padding / 2.25)\n      .attr('cy', this.settings.label_padding / 2.5)\n      .attr('r', this.settings.item_size / 2)\n    button.append('text')\n      .style('stroke-width', 1)\n      .style('text-anchor', 'middle')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 2.25)\n      .attr('y', this.settings.label_padding / 2.5)\n      .attr('dy', () => {\n        return Math.floor(this.settings.width / 100) / 3\n      })\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .html('&#x2190')\n    button.transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n  }\n\n\n  /**\n   * Transition and remove items and labels related to global overview\n   */\n  removeGlobalOverview() {\n    this.items.selectAll('.item-block-year')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .remove()\n    this.labels.selectAll('.label-year').remove()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to year overview\n   */\n  removeYearOverview() {\n    this.items.selectAll('.item-circle')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .remove()\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-month').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to month overview\n   */\n  removeMonthOverview() {\n    this.items.selectAll('.item-block-month').selectAll('.item-block-rect')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d, i) => {\n        return (i % 2 === 0) ? -this.settings.width / 3 : this.settings.width / 3\n      })\n      .remove()\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-week').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to week overview\n   */\n  removeWeekOverview() {\n    this.items.selectAll('.item-block-week').selectAll('.item-block-rect')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d, i) => {\n        return (i % 2 === 0) ? -this.settings.width / 3 : this.settings.width / 3\n      })\n      .remove()\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-week').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to daily overview\n   */\n  removeDayOverview() {\n    this.items.selectAll('.item-block')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d, i) => {\n        return (i % 2 === 0) ? -this.settings.width / 3 : this.settings.width / 3\n      })\n      .remove()\n    this.labels.selectAll('.label-time').remove()\n    this.labels.selectAll('.label-project').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Helper function to hide the tooltip\n   */\n  hideTooltip() {\n    this.tooltip.transition()\n      .duration(this.settings.transition_duration / 2)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n  }\n\n\n  /**\n   * Helper function to hide the back button\n   */\n  hideBackButton() {\n    this.buttons.selectAll('.button')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .remove()\n  }\n\n  render() {\n    return (\n      <div id='calendar-heatmap'\n        className={styles.calendarHeatmap}\n        ref={elem => {this.container = elem}}>\n      </div>\n    )\n  }\n}\n\n  /**\n   * Helper function to convert seconds to a human readable format\n   * @param seconds Integer\n   */\nconst formatTime = (seconds) => {\n  let hours = Math.floor(seconds / 3600)\n  let minutes = Math.floor((seconds - (hours * 3600)) / 60)\n  let time = ''\n  if (hours > 0) {\n    time += hours === 1 ? '1 hour ' : hours + ' hours '\n  }\n  if (minutes > 0) {\n    time += minutes === 1 ? '1 minute' : minutes + ' minutes'\n  }\n  if (hours === 0 && minutes === 0) {\n    time = Math.round(seconds) + ' seconds'\n  }\n  return time\n}\n\nCalendarHeatmap.defaultProps = {\n  data: [],\n  overview: 'year',\n  color: '#ff4500',\n  handler: undefined,\n  onlyYearOverview: false,\n  startOfYearOverview: null,\n  convFunction: formatTime,\n}\n\nexport default CalendarHeatmap\n\n\n\n// WEBPACK FOOTER //\n// ./src/calendar-heatmap.component.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\",\"umd\":\"react\"}\n// module id = 2\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 3\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 4\n// module chunks = 0 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./calendar-heatmap.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./calendar-heatmap.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./calendar-heatmap.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/calendar-heatmap.css\n// module id = 5\n// module chunks = 0 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".calendar-heatmap__calendarHeatmap___2vEkr {\\n  font-family: Helvetica, Arial, sans-serif;\\n  user-select: none;\\n  -ms-user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  overflow:auto;\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm {\\n  pointer-events: none;\\n  position: absolute;\\n  z-index: 9999;\\n  width: 250px;\\n  max-width: 250px;\\n  overflow: hidden;\\n  padding: 15px;\\n  font-size: 12px;\\n  text-align: left;\\n  line-height: 14px;\\n  color: rgb(51, 51, 51);\\n  font-family: Helvetica, arial, 'Open Sans', sans-serif;\\n  background: rgba(255, 255, 255, 0.75);\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm .calendar-heatmap__header___y_GbL strong {\\n  display: inline-block;\\n  width: 250px;\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm span {\\n  display: inline-block;\\n  width: 50%;\\n  padding-right: 10px;\\n  box-sizing: border-box;\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm span,\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm .calendar-heatmap__header___y_GbL strong {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"calendarHeatmap\": \"calendar-heatmap__calendarHeatmap___2vEkr\",\n\t\"heatmapTooltip\": \"calendar-heatmap__heatmapTooltip___2eEYm\",\n\t\"header\": \"calendar-heatmap__header___y_GbL\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./src/calendar-heatmap.css\n// module id = 6\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 7\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/addStyles.js\n// module id = 8\n// module chunks = 0 1","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/urls.js\n// module id = 9\n// module chunks = 0 1"],"sourceRoot":""}